package kotlin.expectations

import kotlin.test.fail
import kotlin.test.assertTrue
import kotlin.test.fails
import kotlin.test.failsWith

public fun expect(val block: () -> Unit) : ExceptionExpectation {
    return ExceptionExpectation(block)
}

class ExceptionExpectation(val block: () -> Unit) {

    fun toThrow(){
        fails(block)
    }

    fun toThrowWith<T>(){
        failsWith<T>(block)
    }

    fun toNotThrow(){
        try{
            block()
        }catch(e: Exception){
            fail()
        }
    }

    fun toNotThrowWith<T>(){
        try{
            failsWith<T>(block)
        }catch(e: Exception){
            if (e is T){
                fail()
            }
        }
    }
}